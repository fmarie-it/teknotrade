{% extends "base_admin.html" %}
{% load static %}

{% block content %}
<style>
    .products img {
        width: 64px;
        height: 64px;
    }
</style>
<div class="inner-block">
    <table class="table table-striped table-hover products">
        <thead>
            <tr>
                <th>ID</th>
                <th>Category</th>
                <th>Name</th>
                <th>Image</th>
                <th>Description</th>
                <th>Requested By</th>
                <th>Status</th>
                <th>Remarks</th>
                <th>Date Created</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for p in products %}
            <tr>
                <td>{{p.id}}</td>
                <td>{{p.category.name}}</td>
                <td>{{p.product_name}}</td>
                <td><img src="{% static 'images/' %}{{p.image}}"/></td>
                <td>{{p.description}}</td>
                <td>{{p.user.first_name}} {{p.user.last_name}}</td>
                <td>
                    {% ifequal p.admin_status "Accepted" %}
                    <span class="label label-success">{{p.admin_status}}</span>
                    {% endifequal %}
                    {% ifequal p.admin_status "Denied" %}
                    <span class="label label-danger">{{p.admin_status}}</span>
                    {% endifequal %}
                    {% ifequal p.admin_status "Pending" %}
                    <span class="label label-default">{{p.admin_status}}</span>
                    {% endifequal %}
                </td>
                <td>{{p.admin_remarks}}</td>
                <td>{{p.date_created}}</td>
                <td>
                    {% ifequal p.admin_status "Pending" %}
                    <form method="POST" action="{% url 'admin_app:update_product_request_view' id=p.id %}">
                        {% csrf_token %}
                        <button class="btn btn-sm btn-success" title="Approve" name="status" value="Accepted"><i class="fa fa-thumbs-up"></i></button>
                        <button class="btn btn-sm btn-danger" title="Decline" name="status" value="Denied"><i class="fa fa-thumbs-down"></i></button>
                    </form>
                    {% endifequal %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="10" class="text-center">There are no pending request(s)</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}